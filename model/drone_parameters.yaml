base_frame: base_link
integrator: irk # options: explicit_euler, implicit_euler, rk4, irk
integrator_settings:
  dt: 0.0001
  substeps: 10
  implicit_max_iterations: 6
  implicit_tolerance: 1.0e-6
  implicit_fd_epsilon: 1.0e-6

# Posizione iniziale
x0_pos: [0.0, 0.0, 0.5]
# Velocità iniziale (m/s)
v0: [0.0, 0.0, -0.0]

# Rotazione iniziale: 90° attorno all'asse Y (pitch) - drone "di faccia"
# Quaternione wxyz: [cos(45°), 0, sin(45°), 0] = [0.7071, 0, 0.7071, 0]
x0_rotation: [0.7071, 0, 0.7071, 0]

mass:
  total: 0.260
  base: 0.157

propellers:
  kappa_thrust: 2.0e-7
  kappa_torque: 1.0e-10
  direction: [1, 1, -1, -1]
  J_r: 1.0e-5
  thrust_max: 8.5

inertia:
  P_Ixx_P: 0.0020
  P_Iyy_P: 0.0020
  P_Izz_P: 0.0020
  B_Ixx_B: 0.0020
  B_Iyy_B: 0.0020
  B_Izz_B: 0.0020

morphing_joint:
  b_joint: 0.03
  k_joint: 0.001
# Contact parameters (spring-damper model)
# Force: F = k * penetration * n + b * v_approach * n
# For numerical stability: b << m/dt ≈ 1300 Ns/m (with dt=0.0002s, m=0.26kg)
# Critical damping (ζ=1): b_crit = 2*sqrt(k*m) ≈ 102 Ns/m
contact:
  stiffness: 100.0     # k - rigidezza molla (N/m)
  damping: 50.0         # b - smorzamento (Ns/m) - ζ ≈ 2 (overdamped, no bounce)
  activation_distance: 0.001  # distanza di attivazione contatto (m)
  enable_ccd: false  # Continuous Collision Detection - previene tunneling
  enable_friction: true  # abilita/disabilita attrito di Coulomb
  friction_coefficient: 0.8  # μ - coefficiente di attrito di Coulomb (tipico: 0.3-1.0)
  box_enabled: false
  box_center: [0.0, 0.0, 0.0]
  box_size: [0.5, 0.4, 0.4]  # x, y, z in metri
  ground_height: 0.0  # usato solo se box_enabled = false

transforms:
  T_BH:
    H0: [0.04, -0.032, 0.0, 0.92387953, 0.0, 0.0, -0.38268343]
    H1: [-0.04, 0.032, 0.0, 0.38268343, 0.0, 0.0, 0.92387953]
    H2: [0.04, 0.032, 0.0, 0.92387953, 0.0, 0.0, 0.38268343]
    H3: [-0.04, -0.032, 0.0, 0.38268343, 0.0, 0.0, -0.92387953]

  T_HP:
    H0_to_motor_0: [0.07, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0]
    H1_to_motor_1: [0.07, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0]
    H2_to_motor_2: [0.07, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0]
    H3_to_motor_3: [0.07, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0]

  T_BP:
    motor_0: [0.08949747, -0.08149747, 0.0, 0.92387953, 0.0, 0.0, -0.38268343]
    motor_1: [-0.08949747, 0.08149747, 0.0, 0.38268343, 0.0, 0.0, 0.92387953]
    motor_2: [0.08949747, 0.08149747, 0.0, 0.92387953, 0.0, 0.0, 0.38268343]
    motor_3: [-0.08949747, -0.08149747, 0.0, 0.38268343, 0.0, 0.0, -0.92387953]
